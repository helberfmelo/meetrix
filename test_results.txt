
   FAIL  Tests\Feature\CouponTest
  ⨯ coupon crud api
  ⨯ 100 percent discount bypasses stripe
  ─────────────────────  
   FA…  QueryException   
  SQLSTATE[HY000]: General error: 1364 Field 'discount_value' doesn't have a default value (Connection: mysql, SQL: insert into `coupons` (`code`, `expires_at`, `is_active`, `updated_at`, `created_at`) values (cupom100, 2026-02-20 00:00:00, 1, 2026-02-20 07:04:41, 2026-02-20 07:04:41))

  at vendor\laravel\framework\src\Illuminate\Database\Connection.php:825
    821▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    822▕                 );
    823▕             }
    824▕ 
  ➜ 825▕             throw new QueryException(
    826▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    827▕             );
    828▕         }
    829▕     }

  1   vendor\laravel\framework\src\Illuminate\Database\Connection.php:825

  2   vendor\laravel\framework\src\Illuminate\Database\MySqlConnection.php:53
      NunoMaduro\Collision\Exceptions\TestException::("SQLSTATE[HY000]: General error: 1364 Field 'discount_value' doesn't have a default value")

  ─────────────────────  
   FA…  QueryException   
  SQLSTATE[HY000]: General error: 1364 Field 'discount_value' doesn't have a default value (Connection: mysql, SQL: insert into `coupons` (`code`, `expires_at`, `is_active`, `updated_at`, `created_at`) values (cupom100, 2026-02-20 00:00:00, 1, 2026-02-20 07:04:43, 2026-02-20 07:04:43))

  at vendor\laravel\framework\src\Illuminate\Database\Connection.php:825
    821▕                     $this->getName(), $query, $this->prepareBindings($bindings), $e
    822▕                 );
    823▕             }
    824▕ 
  ➜ 825▕             throw new QueryException(
    826▕                 $this->getName(), $query, $this->prepareBindings($bindings), $e
    827▕             );
    828▕         }
    829▕     }

  1   vendor\laravel\framework\src\Illuminate\Database\Connection.php:825

  2   vendor\laravel\framework\src\Illuminate\Database\MySqlConnection.php:53
      NunoMaduro\Collision\Exceptions\TestException::("SQLSTATE[HY000]: General error: 1364 Field 'discount_value' doesn't have a default value")


  Tests:    2 failed (0 assertions)
  Duration: 8.70s

