## Objetivo do PR
Implementar o item P1-2 do roadmap YCBM: reagendamento/cancelamento self-service para convidado com token seguro.

## Etapa / Escopo
- Plano: YCBM gaps (P1)
- Item: P1-2 (self-service guest reschedule/cancel)
- Itens implementados:
  - Token publico em booking para gerenciamento seguro por convidado.
  - Endpoints publicos para consultar, cancelar e reagendar via token.
  - Tela publica de gerenciamento (view + rotas) com i18n.
  - Link de gerenciamento no email de confirmacao.

## Fora de escopo (neste PR)
- Round-robin/roteamento de equipe (P1-1).
- Templates de notificacao por evento (P1-3).
- Atualizacoes de billing/assinaturas (P0).

## Mudancas tecnicas
- Backend:
  - Criado controlador publico para consultar/cancelar/reagendar via token.
  - Booking passa a gerar `public_token` na criacao.
  - Link de gerenciamento exposto no email de confirmacao.
- Frontend:
  - Nova view `BookingManage` com fluxo de cancelamento e reagendamento.
  - Nova rota publica `/p/:slug/manage`.
  - Chaves i18n adicionadas em todos os locales.
- Banco:
  - Coluna `public_token` (unique) em `bookings`.
- Config/Infra:
  - Sem alteracoes.

## Arquivos principais alterados
- `app/Http/Controllers/PublicBookingController.php`
- `app/Http/Controllers/BookingController.php`
- `app/Models/Booking.php`
- `database/migrations/2026_02_21_230000_add_public_token_to_bookings_table.php`
- `resources/js/Views/BookingManage.vue`
- `resources/js/router.js`
- `resources/js/locales/*.json`
- `resources/views/emails/bookings/confirmation.blade.php`
- `resources/views/emails/bookings/confirmation_plain.blade.php`
- `docs/PR_YCBM_2026-02-21_P1-2.md`

## Evidencias de teste
- [x] Build frontend executado
- [ ] Smoke manual (flow: confirmar email -> abrir manage -> cancelar/reagendar)

Comandos executados:
```bash
npm run build
```

Resultado:
- Build OK (vite build)

## Gate
- [x] Build verde
- [ ] Fluxo publico de gerenciamento funcional
- [ ] Sem regressao no booking padrao

## Deploy e validacao em producao
- [ ] GitHub Actions `deploy.yml` verde
- [ ] Validacao em producao concluida

## Rollback
- Tag de referencia: `snapshot/pre-upgrade-2026-02-21`
- Plano de rollback:
  - Reverter migracao e remover rotas/controllers da API publica.
  - Remover view/rota de gerenciamento e link no email.

## Observacoes
- O token publico e gerado apenas para novos bookings. Bookings antigos permanecem sem link de gerenciamento.
